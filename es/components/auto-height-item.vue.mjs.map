{"version":3,"file":"auto-height-item.vue.mjs","sources":["../../src/components/auto-height-item.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, ref, useAttrs, watch } from 'vue'\n\nimport { useResizeObserver } from '@vueuse/core'\n\nconst props = defineProps({\n  h: {\n    type: Number,\n    required: true\n  },\n  rowHeight: {\n    type: Number,\n    default: 30\n  },\n  margin: {\n    type: Array,\n    default: () => [10, 10]\n  },\n  minH: {\n    type: Number,\n    default: 1\n  },\n  maxH: {\n    type: Number,\n    default: Infinity\n  }\n})\nconst attrs = useAttrs()\n\nconst emit = defineEmits(['update:h'])\n\nconst contentRef = ref(null)\nconst contentHeight = ref(0)\n\nconst calculatedRows = computed(() => {\n  if (contentHeight.value <= 0) return props.minH\n\n  const marginY = props.margin[1]\n  const rows = Math.ceil((contentHeight.value + marginY) / (props.rowHeight + marginY))\n\n  return Math.min(Math.max(rows, props.minH), props.maxH)\n})\n\nuseResizeObserver(contentRef, entries => {\n  const entry = entries[0]\n  if (entry) {\n    contentHeight.value = entry.contentRect.height\n  }\n})\n\nwatch(\n  () => calculatedRows.value,\n  newRows => {\n    if (newRows !== props.h) {\n      emit('update:h', newRows)\n    }\n  }\n)\n</script>\n\n<template>\n  <GridItem v-bind=\"{ ...attrs, ...props }\">\n    <div ref=\"contentRef\">\n      <slot></slot>\n    </div>\n  </GridItem>\n</template>\n"],"names":["props","__props","attrs","useAttrs","emit","__emit","contentRef","ref","contentHeight","calculatedRows","computed","marginY","rows","useResizeObserver","entries","entry","watch","newRows"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,UAAMA,IAAQC,GAsBRC,IAAQC,EAAS,GAEjBC,IAAOC,GAEPC,IAAaC,EAAI,IAAI,GACrBC,IAAgBD,EAAI,CAAC,GAErBE,IAAiBC,EAAS,MAAM;AACpC,UAAIF,EAAc,SAAS,EAAG,QAAOR,EAAM;AAErC,YAAAW,IAAUX,EAAM,OAAO,CAAC,GACxBY,IAAO,KAAK,MAAMJ,EAAc,QAAQG,MAAYX,EAAM,YAAYW,EAAQ;AAE7E,aAAA,KAAK,IAAI,KAAK,IAAIC,GAAMZ,EAAM,IAAI,GAAGA,EAAM,IAAI;AAAA,IAAA,CACvD;AAED,WAAAa,EAAkBP,GAAY,CAAWQ,MAAA;AACjC,YAAAC,IAAQD,EAAQ,CAAC;AACvB,MAAIC,MACYP,EAAA,QAAQO,EAAM,YAAY;AAAA,IAC1C,CACD,GAEDC;AAAA,MACE,MAAMP,EAAe;AAAA,MACrB,CAAWQ,MAAA;AACL,QAAAA,MAAYjB,EAAM,KACpBI,EAAK,YAAYa,CAAO;AAAA,MAC1B;AAAA,IAEJ;;;;;;;;;;;;;;;;"}